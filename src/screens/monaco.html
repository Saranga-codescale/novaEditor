<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Monaco Editor</title>
    <script src="https://unpkg.com/monaco-editor@0.33.0/min/vs/loader.js"></script>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #container {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script>
      require.config({
        paths: {vs: 'https://unpkg.com/monaco-editor@0.33.0/min/vs'},
      });
      require(['vs/editor/editor.main'], function () {
        // Initialize Monaco Editor
        window.editor = monaco.editor.create(
          document.getElementById('container'),
          {
            value: '',
            language: 'javascript',
            theme: 'vs-dark',
            readOnly: false,
            tabSize: 2,
          },
        );

        // Listen for messages from React Native
        window.addEventListener('message', function (event) {
          const {type, payload} = event.data;
          switch (type) {
            case 'setValue':
              window.editor.setValue(payload);
              break;
            case 'getValue':
              window.ReactNativeWebView.postMessage(
                JSON.stringify({
                  type: 'getValue',
                  payload: window.editor.getValue(),
                }),
              );
              break;
            case 'updateOptions':
              window.editor.updateOptions(payload);
              break;
          }
        });
      });
    </script>
  </body>
</html>
